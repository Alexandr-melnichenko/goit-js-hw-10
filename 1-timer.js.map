{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["// Імпортую бібліотеки\nimport flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Створюю ДОМ обʼєкти та глобальні перемінні\nconst startButton = document.querySelector('button[data-start]');\nstartButton.disabled = true;\nconst inputData = document.querySelector('input#datetime-picker');\nlet daysData = document.querySelector('.value[data-days]');\nlet hoursData = document.querySelector('.value[data-hours]');\nlet minutesData = document.querySelector('.value[data-minutes]');\nlet secondsData = document.querySelector('.value[data-seconds]');\n\n// Опції та ініціалізація бібліотеки календаря\nlet userSelectedDate = 0;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    if (selectedDates[0] < new Date()) {\n      iziToast.show({\n        message: 'Please choose a date in the future',\n        position: 'topCenter',\n        color: 'red',\n      });\n      startButton.disabled = true;\n    } else if (selectedDates[0] > new Date()) {\n      startButton.disabled = false;\n      userSelectedDate = selectedDates[0];\n    }\n  },\n};\n\nconst calendar = flatpickr('input#datetime-picker', options);\nconsole.log(calendar.selectedDates[0]);\n\n\n// Створення класу таймеру\nclass StartTimer {\n  constructor(onTick) {\n    this.isActive = false; // Инициализация состояния активности\n    this.onTick = onTick; // Привязываем коллбек\n  }\n\n  start() {\n    if (this.isActive) return;\n\n    this.isActive = true;\n    startButton.disabled = true;\n    inputData.disabled = true;\n\n    let deltaTime = userSelectedDate - new Date();\n\n    this.intervalId = setInterval(() => {\n      if (deltaTime >= 1000) {\n        deltaTime -= 1000;\n      } else {\n        deltaTime = 0;\n        this.stop(); // Останавливаем таймер\n      }\n      const time = convertMs(deltaTime);\n      this.onTick(time); // Вызываем коллбек\n    }, 1000);\n  }\n  stop() {\n    clearInterval(this.intervalId);\n    this.isActive = false;\n    startButton.disabled = false;\n    inputData.disabled = false;\n  }\n}\n\n// Функция для отображения значений\nfunction onTick({ days, hours, minutes, seconds }) {\n    daysData.innerHTML = days;\n    hoursData.innerHTML = hours;\n    minutesData.innerHTML = minutes;\n    secondsData.innerHTML = seconds;\n  }\n\n\nconst pad = value => {\n  return String(value).padStart(2, '0');\n};\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = pad(Math.floor(ms / day));\n  // Remaining hours\n  const hours = pad(Math.floor((ms % day) / hour));\n  // Remaining minutes\n  const minutes = pad(Math.floor(((ms % day) % hour) / minute));\n  // Remaining seconds\n  const seconds = pad(Math.floor((((ms % day) % hour) % minute) / second));\n\n  return { days, hours, minutes, seconds };\n}\n\nconsole.log(convertMs(2000)); // {days: 0, hours: 0, minutes: 0, seconds: 2}\nconsole.log(convertMs(140000)); // {days: 0, hours: 0, minutes: 2, seconds: 20}\nconsole.log(convertMs(24140000)); // {days: 0, hours: 6 minutes: 42, seconds: 20}\n\nconst timer = new StartTimer(onTick);\nconsole.dir(timer);\n// Слухачі на події - вибір дати та кнопка старт\nstartButton.addEventListener('click', () => timer.start());\n"],"names":["startButton","inputData","daysData","hoursData","minutesData","secondsData","userSelectedDate","options","selectedDates","iziToast","calendar","flatpickr","StartTimer","onTick","deltaTime","time","convertMs","days","hours","minutes","seconds","pad","value","ms","timer"],"mappings":"0IAOA,MAAMA,EAAc,SAAS,cAAc,oBAAoB,EAC/DA,EAAY,SAAW,GACvB,MAAMC,EAAY,SAAS,cAAc,uBAAuB,EAChE,IAAIC,EAAW,SAAS,cAAc,mBAAmB,EACrDC,EAAY,SAAS,cAAc,oBAAoB,EACvDC,EAAc,SAAS,cAAc,sBAAsB,EAC3DC,EAAc,SAAS,cAAc,sBAAsB,EAG3DC,EAAmB,EAEvB,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACjBA,EAAc,CAAC,EAAI,IAAI,MACzBC,EAAS,KAAK,CACZ,QAAS,qCACT,SAAU,YACV,MAAO,KACf,CAAO,EACDT,EAAY,SAAW,IACdQ,EAAc,CAAC,EAAI,IAAI,OAChCR,EAAY,SAAW,GACvBM,EAAmBE,EAAc,CAAC,EAErC,CACH,EAEME,EAAWC,EAAU,wBAAyBJ,CAAO,EAC3D,QAAQ,IAAIG,EAAS,cAAc,CAAC,CAAC,EAIrC,MAAME,CAAW,CACf,YAAYC,EAAQ,CAClB,KAAK,SAAW,GAChB,KAAK,OAASA,CACf,CAED,OAAQ,CACN,GAAI,KAAK,SAAU,OAEnB,KAAK,SAAW,GAChBb,EAAY,SAAW,GACvBC,EAAU,SAAW,GAErB,IAAIa,EAAYR,EAAmB,IAAI,KAEvC,KAAK,WAAa,YAAY,IAAM,CAC9BQ,GAAa,IACfA,GAAa,KAEbA,EAAY,EACZ,KAAK,KAAI,GAEX,MAAMC,EAAOC,EAAUF,CAAS,EAChC,KAAK,OAAOC,CAAI,CACjB,EAAE,GAAI,CACR,CACD,MAAO,CACL,cAAc,KAAK,UAAU,EAC7B,KAAK,SAAW,GAChBf,EAAY,SAAW,GACvBC,EAAU,SAAW,EACtB,CACH,CAGA,SAASY,EAAO,CAAE,KAAAI,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CAC/ClB,EAAS,UAAYe,EACrBd,EAAU,UAAYe,EACtBd,EAAY,UAAYe,EACxBd,EAAY,UAAYe,CACzB,CAGH,MAAMC,EAAMC,GACH,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,EAGtC,SAASN,EAAUO,EAAI,CAQrB,MAAMN,EAAOI,EAAI,KAAK,MAAME,EAAK,KAAG,CAAC,EAE/BL,EAAQG,EAAI,KAAK,MAAOE,EAAK,MAAO,IAAI,CAAC,EAEzCJ,EAAUE,EAAI,KAAK,MAAQE,EAAK,MAAO,KAAQ,GAAM,CAAC,EAEtDH,EAAUC,EAAI,KAAK,MAASE,EAAK,MAAO,KAAQ,IAAU,GAAM,CAAC,EAEvE,MAAO,CAAE,KAAAN,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,QAAQ,IAAIJ,EAAU,GAAI,CAAC,EAC3B,QAAQ,IAAIA,EAAU,IAAM,CAAC,EAC7B,QAAQ,IAAIA,EAAU,MAAQ,CAAC,EAE/B,MAAMQ,EAAQ,IAAIZ,EAAWC,CAAM,EACnC,QAAQ,IAAIW,CAAK,EAEjBxB,EAAY,iBAAiB,QAAS,IAAMwB,EAAM,MAAK,CAAE"}